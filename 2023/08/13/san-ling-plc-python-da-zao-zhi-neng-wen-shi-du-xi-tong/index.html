<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

    
<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>
    

<meta charset="utf-8" >

<title>三菱plc+ python打造智能温湿度系统</title>
<meta name="keywords" content="三菱plc+ python打造智能温湿度系统, kk&#39;shining">
<meta name="description" content="三菱plc+ python打造智能温湿度系统本项目基于三菱plc系列的FX3N, 通过python搭建客户端实现远程控制. 因经费有限再加上只交作业, 所以plc采用凌一plc模拟器来实现plc基本功能和基于modbus 协议的网络通信
硬">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="三菱plc+ python打造智能温湿度系统">
<meta property="og:description" content="三菱plc+ python打造智能温湿度系统本项目基于三菱plc系列的FX3N, 通过python搭建客户端实现远程控制. 因经费有限再加上只交作业, 所以plc采用凌一plc模拟器来实现plc基本功能和基于modbus 协议的网络通信
硬">

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/style/main.css">

  <meta name="generator" content="Hexo 7.3.0"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://blog.shiningonly.cn">
        <img class="avatar" src="/images/avatar.png" alt="logo" width="32px" height="32px">
      </a>
      <a href="https://blog.shiningonly.cn">
        <h1 class="site-title">kk&#39;shining</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/" class="menu purple-link">
        首页
      </a>
    
  
    
      <a href="/tags" class="menu purple-link">
        标签
      </a>
    
  
    
      <a href="/archives" class="menu purple-link">
        归档
      </a>
    
  
    
      <a href="/about" class="menu purple-link">
        关于
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">三菱plc+ python打造智能温湿度系统</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2023-08-13</span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <h1 id="三菱plc-python打造智能温湿度系统"><a href="#三菱plc-python打造智能温湿度系统" class="headerlink" title="三菱plc+ python打造智能温湿度系统"></a>三菱plc+ python打造智能温湿度系统</h1><p>本项目基于三菱<code>plc</code>系列的<code>FX3N</code>, 通过<code>python</code>搭建客户端实现远程控制. 因经费有限再加上只交作业, 所以plc采用凌一plc模拟器来实现plc基本功能和基于<code>modbus</code> 协议的网络通信</p>
<h2 id="硬件端"><a href="#硬件端" class="headerlink" title="硬件端"></a>硬件端</h2><blockquote>
<p>核心硬件为plc，所接外设有温湿度传感器和网络模块</p>
<p>所用 plc 为fx 系列的<code>FX3N</code>, 编程软件为<code>GX works2</code> 。plc 方面只实现了简单的基本开关比较逻辑</p>
</blockquote>
<h3 id="梯形图"><a href="#梯形图" class="headerlink" title="梯形图"></a>梯形图</h3><p><a class="simple-lightbox" target="_blank" rel="noopener" href="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185356596.png"><img   src="/images/loading.svg" data-src="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185356596.png"  alt="image-20230625185356596" lazyload></a></p>
<p><a class="simple-lightbox" target="_blank" rel="noopener" href="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185401403.png"><img   src="/images/loading.svg" data-src="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185401403.png"  alt="image-20230625185401403" lazyload></a></p>
<h3 id="仿真"><a href="#仿真" class="headerlink" title="仿真"></a>仿真</h3><blockquote>
<p>模拟仿真用到了凌一plc模拟器， 自带tcp协议</p>
</blockquote>
<p><a class="simple-lightbox" target="_blank" rel="noopener" href="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185735268.png"><img   src="/images/loading.svg" data-src="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/image-20230625185735268.png"  alt="image-20230625185735268" lazyload></a></p>
<p>当按下指定的输入端口时，输出端口按照所写梯形图逻辑变化</p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><blockquote>
<p>后端采用python的flask框架搭建， 编写相应的显示控制逻辑</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request, jsonify</span><br><span class="line"><span class="keyword">from</span> pyModbusTCP.client <span class="keyword">import</span> ModbusClient</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 凌一模拟器的IP地址和端口号</span></span><br><span class="line">MODBUS_TCP_IP = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">MODBUS_TCP_PORT = <span class="number">502</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Modbus寄存器地址</span></span><br><span class="line">TEMPERATURE_REGISTER = <span class="number">0</span></span><br><span class="line">HUMIDITY_REGISTER = <span class="number">5</span></span><br><span class="line">FAN_COIL_REGISTER = <span class="number">32832</span></span><br><span class="line">HUMIDIFIER_REGISTER = <span class="number">32833</span></span><br><span class="line">FAN_STATUS = <span class="number">32848</span></span><br><span class="line">HUMIDIFIER_STATUS = <span class="number">32858</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Modbus TCP客户端</span></span><br><span class="line">client = ModbusClient(host=MODBUS_TCP_IP, port=MODBUS_TCP_PORT, auto_open=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/data&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    <span class="comment"># 读取温度和湿度数据</span></span><br><span class="line">    temperature = read_register(TEMPERATURE_REGISTER)</span><br><span class="line">    humidity = read_register(HUMIDITY_REGISTER)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从PLC读取电风扇和加湿器的状态</span></span><br><span class="line">    fan_status = read_register(FAN_STATUS)</span><br><span class="line">    humidifier_status = read_register(HUMIDIFIER_STATUS)</span><br><span class="line">    <span class="built_in">print</span>(fan_status, humidifier_status)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 构造包含温湿度和状态的JSON响应</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;temperature&#x27;</span>: temperature,</span><br><span class="line">        <span class="string">&#x27;humidity&#x27;</span>: humidity,</span><br><span class="line">        <span class="string">&#x27;fan_status&#x27;</span>: fan_status,</span><br><span class="line">        <span class="string">&#x27;humidifier_status&#x27;</span>: humidifier_status</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/control&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">control_devices</span>():</span><br><span class="line">    <span class="comment"># 获取前端发送的控制指令</span></span><br><span class="line">    fan_status = <span class="built_in">int</span>(request.form[<span class="string">&#x27;fan&#x27;</span>])</span><br><span class="line">    humidifier_status = <span class="built_in">int</span>(request.form[<span class="string">&#x27;humidifier&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 控制风扇和加湿器状态</span></span><br><span class="line">    write_register(FAN_COIL_REGISTER, fan_status)</span><br><span class="line">    write_register(HUMIDIFIER_REGISTER, humidifier_status)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回控制结果给前端</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;success&#x27;</span>: <span class="literal">True</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_register</span>(<span class="params">register</span>):</span><br><span class="line">    <span class="comment"># 读取Modbus寄存器的值</span></span><br><span class="line">    result = client.read_holding_registers(register, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> result:</span><br><span class="line">        <span class="keyword">return</span> result[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_register</span>(<span class="params">register, value</span>):</span><br><span class="line">    <span class="comment"># 写入Modbus寄存器的值</span></span><br><span class="line">    result = client.write_single_register(register, value)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><blockquote>
<p>前端html页面用到了JavaScript实时发送请求后端来获取最新的数据</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f8f9fa</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.data-card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.data-card</span> <span class="selector-tag">h5</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#888888</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.data-card</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.control-buttons</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.control-buttons</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.status-label</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>实时温湿度监控<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>实时温湿度监控<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span>--designed by shining(秦盛林)<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;data-card&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>温度<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;temperature&quot;</span>&gt;</span>0°C<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;data-card&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>湿度<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;humidity&quot;</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;data-card&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>风扇状态<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;fan-status&quot;</span> <span class="attr">class</span>=<span class="string">&quot;status-label&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;data-card&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>加湿器状态<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;humidifier-status&quot;</span> <span class="attr">class</span>=<span class="string">&quot;status-label&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control-buttons&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fan-on&quot;</span>&gt;</span>打开风扇<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fan-off&quot;</span>&gt;</span>关闭风扇<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;humidifier-on&quot;</span>&gt;</span>打开加湿器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">id</span>=<span class="string">&quot;humidifier-off&quot;</span>&gt;</span>关闭加湿器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 控制按钮点击事件</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#fan-on&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 发送控制命令</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(<span class="string">&#x27;/control&#x27;</span>, &#123;<span class="attr">fan</span>: <span class="number">1</span>, <span class="attr">humidifier</span>: <span class="number">0</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#fan-off&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 发送控制命令</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(<span class="string">&#x27;/control&#x27;</span>, &#123;<span class="attr">fan</span>: <span class="number">0</span>, <span class="attr">humidifier</span>: <span class="number">0</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#humidifier-on&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 发送控制命令</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(<span class="string">&#x27;/control&#x27;</span>, &#123;<span class="attr">fan</span>: <span class="number">0</span>, <span class="attr">humidifier</span>: <span class="number">1</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#humidifier-off&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 发送控制命令</span></span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(<span class="string">&#x27;/control&#x27;</span>, &#123;<span class="attr">fan</span>: <span class="number">0</span>, <span class="attr">humidifier</span>: <span class="number">0</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定时更新温湿度数据和设备状态</span></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">getJSON</span>(<span class="string">&#x27;/data&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#temperature&#x27;</span>).<span class="title function_">text</span>(data.<span class="property">temperature</span> + <span class="string">&#x27;°C&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#humidity&#x27;</span>).<span class="title function_">text</span>(data.<span class="property">humidity</span> + <span class="string">&#x27;%&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#fan-status&#x27;</span>).<span class="title function_">text</span>(data.<span class="property">fan_status</span> ? <span class="string">&#x27;打开&#x27;</span> : <span class="string">&#x27;关闭&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&#x27;#humidifier-status&#x27;</span>).<span class="title function_">text</span>(data.<span class="property">humidifier_status</span> ? <span class="string">&#x27;打开&#x27;</span> : <span class="string">&#x27;关闭&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="web端界面"><a href="#web端界面" class="headerlink" title="web端界面"></a>web端界面</h3><p><a class="simple-lightbox" target="_blank" rel="noopener" href="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/Snipaste_2023-06-19_14-38-42.png"><img   src="/images/loading.svg" data-src="https://shiningonly.oss-cn-shenzhen.aliyuncs.com/typora/Snipaste_2023-06-19_14-38-42.png"  alt="Snipaste_2023-06-19_14-38-42" lazyload></a></p>

        </div>
          
        <div class="top-div">
          <ol class="top-box"><li class="top-box-item top-box-level-1"><a class="top-box-link" href="#%E4%B8%89%E8%8F%B1plc-python%E6%89%93%E9%80%A0%E6%99%BA%E8%83%BD%E6%B8%A9%E6%B9%BF%E5%BA%A6%E7%B3%BB%E7%BB%9F"><span class="top-box-text">三菱plc+ python打造智能温湿度系统</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E7%A1%AC%E4%BB%B6%E7%AB%AF"><span class="top-box-text">硬件端</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#%E6%A2%AF%E5%BD%A2%E5%9B%BE"><span class="top-box-text">梯形图</span></a></li><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#%E4%BB%BF%E7%9C%9F"><span class="top-box-text">仿真</span></a></li></ol></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="top-box-text">客户端</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#python"><span class="top-box-text">python</span></a></li><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#html"><span class="top-box-text">html</span></a></li><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#web%E7%AB%AF%E7%95%8C%E9%9D%A2"><span class="top-box-text">web端界面</span></a></li></ol></li></ol></li></ol>
        </div>
          
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/2023/08/11/zen-yang-yong-bu-tong-de-yu-ming-fang-wen-yi-tai-fu-wu-qi-shang-de-duo-ge-wang-zhan/">
          <h3 class="post-title">
            
            下一篇：怎样用不同的域名访问一台服务器上的多个网站
          </h3>
        </a>
      </div>
    
  </div>










<footer>
<div class="site-footer">
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </div>
  

  

  
    <div>
      <a href="https://beian.miit.gov.cn" target="_blank">鄂ICP备2023028588号-4</a>
    </div>
  

  
    <div>
      <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">本站由 <img src="/images/upyun_logo.png" alt="又拍云" style="height:2em;vertical-align:-0.65em;"> 提供CDN加速/云存储服务</a>
    </div>
  

</div>
</footer>


      </div>
    </div>
    
<script id="hexo-configurations"> window.theme_config = {"image":{"lazyload_enable":true,"lazyload_placeholder":null,"photo_zoom":false},"search":{"enable":true,"type":"json","placeholder":"输入关键词搜索...","algolia":{"appID":"","apiKey":"","indexName":""}},"language":"zh-CN"}; window.is_post = true; </script>

<script src="/js/main.js"></script>






  </body>
</html>

