<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

    
<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>
    

<meta charset="utf-8" >

<title>苹果手机原生遥控器控制安卓TV</title>
<meta name="keywords" content="苹果手机原生遥控器控制安卓TV, kk&#39;shining">
<meta name="description" content="苹果手机原生遥控器控制安卓TV
实现原理：通过homeassistant搭配nodered控制开启ADB调试的安卓电视并通过相关插件接入到homekit

安卓TV开启ADB调试安卓tv开启ADB调试网上方法有很多，自行百度，这里不再赘述，">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="苹果手机原生遥控器控制安卓TV">
<meta property="og:description" content="苹果手机原生遥控器控制安卓TV
实现原理：通过homeassistant搭配nodered控制开启ADB调试的安卓电视并通过相关插件接入到homekit

安卓TV开启ADB调试安卓tv开启ADB调试网上方法有很多，自行百度，这里不再赘述，">

<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/style/main.css">

  <meta name="generator" content="Hexo 7.3.0"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://blog.shiningonly.cn">
        <img class="avatar" src="/images/avatar.png" alt="logo" width="32px" height="32px">
      </a>
      <a href="https://blog.shiningonly.cn">
        <h1 class="site-title">kk&#39;shining</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/" class="menu purple-link">
        首页
      </a>
    
  
    
      <a href="/tags" class="menu purple-link">
        标签
      </a>
    
  
    
      <a href="/archives" class="menu purple-link">
        归档
      </a>
    
  
    
      <a href="/about" class="menu purple-link">
        关于
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">苹果手机原生遥控器控制安卓TV</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2022-04-26</span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <h1 id="苹果手机原生遥控器控制安卓TV"><a href="#苹果手机原生遥控器控制安卓TV" class="headerlink" title="苹果手机原生遥控器控制安卓TV"></a>苹果手机原生遥控器控制安卓TV</h1><blockquote>
<p>实现原理：通过homeassistant搭配nodered控制开启ADB调试的安卓电视并通过相关插件接入到homekit</p>
</blockquote>
<h2 id="安卓TV开启ADB调试"><a href="#安卓TV开启ADB调试" class="headerlink" title="安卓TV开启ADB调试"></a>安卓TV开启ADB调试</h2><p>安卓tv开启ADB调试网上方法有很多，自行百度，这里不再赘述，可以看一下我提供的参考链接</p>
<p>因为我是海信vidda的, 这里推荐一个vidda开启ADB的<a target="_blank" rel="noopener" href="https://www.znds.com/tv-1239474-1-1.html">参考链接</a>, 其他设备可以自行搜索</p>
<h2 id="安装及配置homeassistant和node-red"><a href="#安装及配置homeassistant和node-red" class="headerlink" title="安装及配置homeassistant和node-red"></a>安装及配置homeassistant和node-red</h2><blockquote>
<p> 我这里用的N1盒子并刷入的istoreos系统，通过docker方式安装</p>
</blockquote>
<h3 id="homeassistant"><a href="#homeassistant" class="headerlink" title="homeassistant"></a>homeassistant</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>在istore应用商店中搜索<strong>homeassistant</strong>并安装</p>
<p>点击打开，再次安装</p>
<p>浏览器输入<code>http://你的N1盒子ip:8123</code>打开ha界面, 信息随便填</p>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>填完后依次点击<strong>设置-设备与服务-添加集成</strong>, 搜索<code>Android Debug Bridge</code>并添加</p>
<p>去路由器后台找到你的电视的<strong>ip地址</strong>, 最好顺便改成静态ip, 防止一段时间后ip变化无法控制到设备</p>
<p>在插件中填入ip地址, 其他默认</p>
<p>配置完后可以去<strong>开发者工具-动作</strong>里面通过ADB命令控制一下电视是否有反应, 如有, 电视调通</p>
<h4 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h4><p>按照上一步ADB测试的方式, 学习动作代码</p>
<ul>
<li>动作选成<strong>学习发送事件</strong></li>
<li>选择设备</li>
<li>注意: 每点击一下<strong>执行动作</strong>, 就要在<strong>8秒</strong>内按下遥控器的<strong>一个按键</strong>, 等待一段时间后, <strong>通知栏</strong>会弹出学习的代码</li>
</ul>
<p>复制冒号后引号内部分, 记录为这个按键对应的机器码</p>
<p>依次学习按键上的相关代码(上、下、左、右、返回、ok、菜单)，记录保存</p>
<h4 id="创建令牌"><a href="#创建令牌" class="headerlink" title="创建令牌"></a>创建令牌</h4><p>home assistant主界面依次点击左下角<strong>用户名-安全-最底下创建令牌</strong>, 令牌只能看到一次, 记录好</p>
<h3 id="node-red"><a href="#node-red" class="headerlink" title="node-red"></a>node-red</h3><p>因选择docker方式安装homeassistant， 无加载项商店，所以只能以docker方式安装<strong>node-red</strong>并通过相关插件与ha互通</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p 1880:1880 \</span><br><span class="line">  -v /mnt/mydisk/tools/nodered/data:/data \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  --restart=unless-stopped \</span><br><span class="line">  --name nodered \</span><br><span class="line">  --network host \</span><br><span class="line">  nodered/node-red</span><br></pre></td></tr></table></figure>

<p>要添加<code>--network host</code>以确保手机可以搜索到设备</p>
<p>安装完毕后浏览器输入<code>http://你的N1盒子ip:1880</code>进入node-red界面</p>
<h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>点击右上角三条横-节点管理-安装, 搜索并依次安装两个插件: <code>node-red-contrib-home-assistant-websocket</code>  <code>node-red-contrib-homekit-bridged</code></p>
<p>至此插件安装完成</p>
<h4 id="导入节点"><a href="#导入节点" class="headerlink" title="导入节点"></a>导入节点</h4><p>网上有很多参考节点, 具体转换函数我也不懂, 这里直接上传一个我自己用的, 可以参考</p>
<p>里面的 ActiveIdentifier和 Set up inputs是手机控制直接打开软件的, 不是很好用, 没有这方面需求的可以和我一样删了, 如有需要, 可<a target="_blank" rel="noopener" href="https://www.home-assistant.io/integrations/androidtv_remote/">参考链接</a> </p>
<h4 id="修改节点"><a href="#修改节点" class="headerlink" title="修改节点"></a>修改节点</h4><p>双击编辑所有蓝色节点</p>
<ul>
<li>修改所有的homeassistant, 点击右边小笔图标, 填入自己homeassistant的<strong>ip</strong>和<strong>令牌</strong>, 令牌取自上面创建的, 其他不变</li>
<li>选择所有的<strong>Action</strong> 为 <strong>androidtv.adb_command</strong></li>
<li>选择所有的<strong>device</strong>或<strong>entity</strong>为自己的电视设备</li>
<li>修改所有<strong>Data</strong>中”command”:”<strong>修改部分</strong>“, 替换成自己机器学习的代码， 注意按照Name对应修改</li>
</ul>
<h4 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h4><p>修改完所有配置后点击右上角部署按钮，<strong>部署</strong></p>
<h2 id="手机控制"><a href="#手机控制" class="headerlink" title="手机控制"></a><strong>手机控制</strong></h2><p>掏出苹果手机，打开<strong>家庭APP</strong>，点击<strong>添加配件-更多选项</strong>，正常会显示出你的电视设备，点击添加</p>
<p>右上角控制栏下滑，最右下角有一个遥控图标，点击，接下来应该就可以通过苹果手机自带的遥控器遥控安卓TV了</p>

        </div>
          
        <div class="top-div">
          <ol class="top-box"><li class="top-box-item top-box-level-1"><a class="top-box-link" href="#%E8%8B%B9%E6%9E%9C%E6%89%8B%E6%9C%BA%E5%8E%9F%E7%94%9F%E9%81%A5%E6%8E%A7%E5%99%A8%E6%8E%A7%E5%88%B6%E5%AE%89%E5%8D%93TV"><span class="top-box-text">苹果手机原生遥控器控制安卓TV</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E5%AE%89%E5%8D%93TV%E5%BC%80%E5%90%AFADB%E8%B0%83%E8%AF%95"><span class="top-box-text">安卓TV开启ADB调试</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AEhomeassistant%E5%92%8Cnode-red"><span class="top-box-text">安装及配置homeassistant和node-red</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#homeassistant"><span class="top-box-text">homeassistant</span></a></li><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#node-red"><span class="top-box-text">node-red</span></a></li></ol></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E6%89%8B%E6%9C%BA%E6%8E%A7%E5%88%B6"><span class="top-box-text">手机控制</span></a></li></ol></li></ol>
        </div>
          
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/2020/08/16/markdown-bian-ji-qi-ji-ben-yu-fa/">
          <h3 class="post-title">
            
            下一篇：Markdown编辑器基本语法
          </h3>
        </a>
      </div>
    
  </div>










<footer>
<div class="site-footer">
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </div>
  

  

  
    <div>
      <a href="https://beian.miit.gov.cn" target="_blank">鄂ICP备2023028588号-4</a>
    </div>
  

  
    <div>
      <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">本站由 <img src="/images/upyun_logo.png" alt="又拍云" style="height:2em;vertical-align:-0.65em;"> 提供CDN加速/云存储服务</a>
    </div>
  

</div>
</footer>


      </div>
    </div>
    
<script id="hexo-configurations"> window.theme_config = {"image":{"lazyload_enable":true,"lazyload_placeholder":null,"photo_zoom":false},"search":{"enable":true,"type":"json","placeholder":"输入关键词搜索...","algolia":{"appID":"","apiKey":"","indexName":""}},"language":"zh-CN"}; window.is_post = true; </script>

<script src="/js/main.js"></script>






  </body>
</html>

